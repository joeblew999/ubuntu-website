{
	auto_https off
	admin localhost:2019
}

https://localhost:443, https://172.20.10.4:443, https://*.local:443 {
	tls .caddy/certs/cert.pem .caddy/certs/key.pem

	# via-gui (priority: 10)
	# HTTPS: https://localhost/admin/ â†’ http://localhost:3000/
	# Note: URI prefix stripped (/admin) before proxying
	handle /admin/* {
		uri strip_prefix /admin
		reverse_proxy localhost:3000
	}

	# Handle direct routes (links generated by the app without /admin prefix)
	handle /cloudflare* {
		reverse_proxy localhost:3000
	}

	handle /claude* {
		reverse_proxy localhost:3000
	}

	handle /deploy* {
		reverse_proxy localhost:3000
	}

	# Root path (home page)
	handle / {
		reverse_proxy localhost:3000
	}

	# via-gui static assets
	handle /_* {
		reverse_proxy localhost:3000
	}

	# Enable logging for debugging
	log {
		output file .caddy/access.log
		format console
	}
}
